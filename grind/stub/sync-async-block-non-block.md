# sync, async, block, non-block

## Intro

* `async`라는 키워드를 자주 접하는것같은데\
  막상 설명을 찾아보면 좀 아쉬움.
* 그렇다고 내가 여기\
  명확하고 정확한 설명을 할것같진 않지만\
  목적은 `마지막 시점에 이렇게 이해했다`\
  를 남기고 틀리다면 나중에 고치려고.
* 언어적인걸 떠나서\
  `async`를 적용(?)하면 어떻구나 하는\
  아직은 흐리멍텅한 느낌을 좀 지우려고.

## sync, async, block, non-block

* 이 4개가 번들처럼 묶임.
* 그 중 딱봐도 비슷한 단어끼리 한번더 묶음.
* 아무튼, 조금씩 설명이 다르거나\
  이해하기 좀 어려웠음 (시스템 콜이 어쩌고..)

### sync / async

* 프로그래밍 언어에서 사용되는\
  비동기 처리 패턴.
* 차이점은 수행을 '누가' 하냐의 관점
* 명령을 해당 thread에서 직접 실행하면 `sync`,\
  다른 thread로 분기되어 실행되면 `async`
* 예를들어 '사과를 깎는다.'의 행위를\
  내가 하면 `sync`, 동생한테 시키면 `async`.

### block / non-block

* 작업 시작 후 프로세스의 동작이\
  유지 되는지 멈추는지에 대한\
  작업과 관련된 프로세스의 동작 방식을 나타냄.
* 차이점은 명령 수행후 return의 관점인것같음.
* 먼저, method는 수행 결과를\
  caller한테 알린다고 가정함.
  * method return형, 유무의 문제가 아니라\
    수행 그 자체(또는 그 method 뭉탱이)가\
    끝났다는 시그널 같은거.
* `block`은 이 시그널을 받고 다음으로 움직이고\
  `non-block`는 상관없이 그냥 감
* 예를 들어 동생에게 사과를 깎게 시키고
  * 나는 깎인 사과가 나올때까지\
    멀뚱히 기다리면 `block`
  * 마찬가지로 시키고 나는 게임하고 있다가\
    다 깎았다고 했을 때(signal)\
    호다닥 갖고와 먹으면 `non-block`

## rebuild

* `sync`, `async`, `block`, `non-block`를\
  조합하면 4가지 경우가 나온다.
  * `sync`, `block`
  * `sync`, `non-block`
  * `async`, `block`
  * `async`, `non-block`
  * 많은 설명에서 이 조합을\
    sequence로 나타내는 경우가 많음.
* 이 4개의 조합을 세부적으로 보면\
  차이가 있긴한데 그런 세부적인 분류가\
  언어적으로 사용했을때 의미가 큰것같지않아서\
  좀 큰 틀로 다시보면 이렇게 구별되고\
  각각 모양이 비슷해짐.
  * (async, block)과 (sync, block)의 경우
    * ![](../../.gitbook/assets/image.png)
  * (async, non-block)과 (sync, non-block)
    * ![](<../../.gitbook/assets/image (1).png>)
  * 그런 의미로 이 sequence에\
    아무 의미를 써놓지 않음.
* 보면 block / non-block를 기준으로\
  비슷하게 되는데 block의 경우 sync처럼,\
  non-block의 경우 async와 유사해보인다.
* 따라서 애초에 중심이되는건 block동작이고\
  각 언어에서 async라는 이름으로\
  이 구현을 돕고있는거아닐까 하는...\
  생각을 해봤다.
* 그래서 non-block동작방식은 async에,\
  block는 sync에 가깝게 생각하면 대충 되는듯.
* 아무튼, 기본적인구조의 프로그램 흐름과\
  async로 된 프로그램의 흐름의 차이점은\
  하위 작업을 현재 작업이 기다리지 않는다는거.

## Async 사용 이유

* 뭐든 반응성 좋게 할라고.
* 특히나 자주 볼 수 있는게\
  data, io, network등이 있는데\
  시간을 잡아먹을 수 있는 잠재력이 있는것들.
* sync, block method들은\
  작업이 끝날때까지 기다려야 한다.
* 시간이 좀 걸린다 싶을때\
  화면 멈춤현상이 이거때문.
* 그럼 전부 async방식으로 바꾸면 되지 않냐\
  라는 글이 있었는데 이전 API(?)들은\
  기본적으로 sync/block 작성되었을것이고\
  이전에는 딱히 문제가 없었는데\
  가면갈수록 비효율이라는것.\
  그럼에도 이전 것들을 갈아치우지 않는 이유는\
  기존에 너무 많은것들이\
  이미 그렇게 되어있어서 라는 답이있었음.
* 어떤 언어든 이 키워드가\
  항상 추가되는거보면\
  그래도 기본적인 이해는 흐름정도만 하고\
  잘 다룰줄 알면 좋을것같다.
